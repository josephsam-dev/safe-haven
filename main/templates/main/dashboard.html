{% extends "main/base.html" %}
{% load static %}

{% block content %}

<style>
/* ===== DASHBOARD STATS (LOCAL & GUARANTEED) ===== */
.dashboard-stats {
  max-width: 900px;
  margin: 2rem auto 3rem;
}

.dashboard-stats .stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1.5rem;
}

.dashboard-stats .stat-card {
  background: #ffffff;
  padding: 1.5rem;
  border-radius: 14px;
  text-align: center;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.dashboard-stats .stat-card h3 {
  margin-bottom: 0.25rem;
  font-size: 0.95rem;
  font-weight: 600;
  color: #555;
}

.dashboard-stats .stat-card p {
  font-size: 2rem;
  font-weight: 700;
  margin: 0;
}

.dashboard-stats .pending { border-left: 5px solid #f59e0b; }
.dashboard-stats .confirmed { border-left: 5px solid #2563eb; }
.dashboard-stats .completed { border-left: 5px solid #16a34a; }
.dashboard-stats .staff { border-left: 5px solid #7c3aed; }
</style>

<section class="page">
  <div class="page-container">

    <h1 class="page-title">Dashboard</h1>

    <p class="welcome-text">
      Welcome back, <strong>{{ user.username }}</strong> ðŸ‘‹
    </p>

    <!-- STATUS SUMMARY -->
    <div class="dashboard-stats">
      <div class="stats-grid">

        <div class="stat-card pending">
          <h3>Pending</h3>
          <p>{{ status_counts.pending }}</p>
        </div>

        <div class="stat-card confirmed">
          <h3>Confirmed</h3>
          <p>{{ status_counts.confirmed }}</p>
        </div>

        <div class="stat-card completed">
          <h3>Completed</h3>
          <p>{{ status_counts.completed }}</p>
        </div>

        {% if user.is_staff %}
        <div class="stat-card staff">
          <h3>Pending Requests</h3>
          <p>{{ pending_total }}</p>
        </div>
        {% endif %}

      </div>
    </div>

    <!-- ACTION CARDS -->
    <div class="dashboard-grid">

      <div class="card">
        <h3>ðŸ§  Counseling</h3>
        <p>Book or manage your counseling sessions.</p>
        <a href="/counseling/book/" class="btn">Book Session</a>
        <a href="/counseling/my-sessions/" class="link">View My Sessions</a>
      </div>

      <div class="card">
        <h3>ðŸ“– Stories</h3>
        <p>Share or read community stories.</p>
        <a href="/stories/" class="btn">Explore Stories</a>
      </div>

      <div class="card">
        <h3>ðŸ›’ Essentials Shop</h3>
        <p>Request subsidized essential items.</p>
        <a href="/shop/" class="btn">Request Items</a>
      </div>

      <div class="card">
        <h3>ðŸ”” Notifications</h3>
        <p>Youâ€™ll see updates about your requests here.</p>
        <a href="/notifications/" class="btn">View Notifications</a>
      </div>

    </div>

  </div>
</section>

{% endblock %}
